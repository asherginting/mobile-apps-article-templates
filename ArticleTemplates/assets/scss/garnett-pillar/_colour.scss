
@mixin pillar-colour($p-kicker, $p-feature-headline, $p-soft, $p-inverted, $p-background, $p-media-background) {

    // Feature headlines
    &.garnett--type-feature,
    &.garnett--type-review,
    &.garnett--type-recipe {
        .headline {
            color: $p-kicker;
        }
    }

    // Comment headline
    &.garnett--type-comment {
        .headline {
            font-weight: 400;
        }
    }

    // Immersive top tags
    &.display-hint--articleImmersive .article--immersive .article__series,
    &.display-hint--articleImmersive .article--immersive .article__series>a {
        color: $p-inverted;
    }


    // Media pages
    &.garnett--type-media {
        .article__header,
        .article__body {
            background-color: $p-media-background;
        }
        .article__header {
            @include mq($from: col4) {
                background-color: darken($p-media-background, 5%);
            }
        }

        .section,
        .headline,
        .main-media,
        .meta,
        .sponsorship {
            background-color: $p-media-background;
        }

        .article--audio,
        .article--visual {
            border-top-color: color($p-soft);
            background-color: $p-media-background;

            @include mq($from: col4) {
                background-color: darken($p-media-background, 5%);
            }
        }

        .audio-player__container {
            .audio-player {
                background-color: transparent;
            }
            .audio-player__wrapper {
                background-color: $p-media-background;
                border-bottom: 1px color(shade-2) dotted;
            }
            @include mq($from: col4) {
                background-color: darken($p-media-background, 5%);
            }
        }

        // hide horizontal white line above video cover image
        .element__inner {
            background-color: inherit;
        }
    }

    // Circle avatar colours
    .avatar {
        background-color: $p-inverted;
    }

    // Pull quotes
    .prose .element-pullquote blockquote {
        &:before,
        &:after,
        footer {
            color: $p-kicker;
        }
    }

    .alerts:active,
    .alerts.following {
        background-color: color(shade-7);
        color: $p-kicker;
    }

    .alerts,
    .alerts.following:active {
        border-color: rgba(color(shade-7), .5);
        color: $p-kicker;
    }


    &.garnett--type-live.is-live {

        a.touchpoint {
            &:active {
                color: $p-kicker;
            }
        }

        .comments__ordering {
            color: $p-kicker;

            &:active {
                color: $p-feature-headline;
            }
        }

        .comment__report,
        .comments .touchpoint--primary {
            .touchpoint__button {
                background-color: $p-kicker;
            }

            &:active .touchpoint__button {
                background-color: $p-feature-headline;
            }

            .touchpoint__label {
                color: $p-kicker;
            }

            &:active .touchpoint__label {
                color: $p-feature-headline;
            }
        }

        .comments__viewmore {
            .comments__viewmore--label {
                color: color(tone-live);
            }

            &:active .comments__viewmore--label {
                color: color(tone-live-accent);
            }
        }

        .article__header,
        .section,
        .headline,
        .standfirst,
        .standfirst__inner,
        .main-media,
        .touchpoint--primary .touchpoint__button {
            background-color: $p-kicker;
        }

        @include mq($from: col4) {
            .article__header,
            .standfirst {
                background-color: darken($p-kicker, 5%);
            }
        }

        .sponsorship {
            background-color: color(tone-live);

            &__about-uri,
            &__formatted-sponsor-name,
            &__formatted-sponsor-name a {
                color: color(shade-7);
            }
        }

        .standfirst {
            color: $p-soft;

            a {
                color: color(shade-7);
            }
        }

        // Template specific styles
        .article--liveblog {
            border-top-color: $p-kicker;

            .prose table,
            .table {
                border-top-color: $p-kicker;
            }


            .prose .element-pullquote {
                blockquote {
                    footer,
                    &::after,
                    &::before {
                        color: $p-kicker;
                    }
                }
            }

            .meta {
                background-color: darken($p-kicker, 5%);
                // background-color: $p-kicker;
                @include mq($from: col4) {
                    background-color: darken($p-kicker, 10%);
                }
            }

            .meta__misc {
                @include mq($from: col4) {
                    background-color: darken($p-kicker, 10%);
                }
            }
        }


        .key-events {
            border-top: 4px solid $p-kicker;
            &__title {
                color: $p-kicker;
            }
            &__time,
            &__link,
            &__link h2 {
                .key-event--highlighted & {
                    color: $p-kicker !important;
                }
            }
        }
    }


    // Maybe make this bit less smart and more manual later?
    @include pillar-reversible(
        $p-kicker, $p-feature-headline, $p-soft, $p-inverted, $p-background);

    &.garnett--type-media {
        @include pillar-reversible(
            $p-inverted, $p-kicker, $p-feature-headline, $p-soft, $p-media-background);
    }

}


// CSS for reversible pillar colours, this means we can
// use $kicker colours to mean $p-kicker or $p-inverted
// depending on context
@mixin pillar-reversible($kicker, $feature, $soft, $inverted, $background) {

    &:not(.garnett--type-live) {
        // Section and series labels above headline
        .article-kicker {
            color: $kicker;
        }

        // Author names
        .byline,
        .byline__author,
        .byline__author a {
            color: $kicker;

        }

        // in-article
        .prose,
        .standfirst {
            // text links
            p, li {
                @include text-underline($kicker, $feature);
            }
        }

        table {
            border-top-color: $soft;
        }
    }

}
